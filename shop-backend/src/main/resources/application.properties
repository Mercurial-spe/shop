spring.application.name=shop-backend
# === 数据库连接配置 ===
# 数据库地址 (shop_db 是你刚才创建的库名)
spring.datasource.url=jdbc:mysql://localhost:3306/shop_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
# 数据库账号
spring.datasource.username=root
# 数据库密码 (⚠️改成你自己的!)
spring.datasource.password=yuzaoqian521
# 驱动类 (新版通常不需要写，但写上更保险)
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# === JPA 魔法配置 ===
# 自动建表策略：update (如果表不存在就创建，存在就更新字段)
spring.jpa.hibernate.ddl-auto=update
# 在控制台打印 SQL 语句 (方便调试)
spring.jpa.show-sql=true
# 格式化 SQL (让打印出来的 SQL 好看点)
spring.jpa.properties.hibernate.format_sql=true

# === 邮件 SMTP 配置 ===
spring.mail.host=${SMTP_HOST:smtp.qq.com}
spring.mail.port=${SMTP_PORT:465}
spring.mail.username=${SMTP_USER:}
spring.mail.password=${SMTP_PASS:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.default-encoding=UTF-8

# === 初始化 data.sql，让 MySQL 也能自动插入测试数据 ===
# 默认只对内存数据库执行，这里强制对 MySQL 也生效
spring.sql.init.mode=always
# 先建表再执行 data.sql，避免“表不存在”问题
spring.jpa.defer-datasource-initialization=true
